<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta charset="UTF-8">
        <title>Cisco ASP - Lab</title>
        <link rel="stylesheet" type="text/css" href="css/main.css"/>
        <link rel="icon" href="img/flag/cloud.png" sizes="32x32">
    </head>
	<body>
		<div class="header">
			<div class="logo"></div>
			<div class="title">Cisco ASP - Labs</div>
		</div>
        <br></br>
        <br></br>
        <br></br>
        <br></br>
        <div id="flag">
            <img class="flagcountry" border="0" src="img/flag/cisco.png"/>
            <b>Technologies</b>
            <img class="flagcountry" border="0" src="img/flag/cisco.png"/>
        </div>â€‹
        <div class="content"> 
            <table class="tabLinks" align="center">
                <tr>
                    <th>BGP</th>
                    <th>MPLS</th>
                    <th>IPv6</th>
                    <th>Automation</th>
                    <th>Segment Routing</th>
                    <th>Service Provider Topologies</th>  
                </tr>
                <tr>
                    <td><a href="https://github.com/cisco-asp-web/asp-labs/blob/main/labs/bgp/basic/basic-8k.clab.yml" target="_blank"><img class="logoLink" src="img/ico/cisco.ico" /> BGP basic Lab</a></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>   
            </table>
        <br></br>
        <br></br>
        <script>
            fetch('/labs')
                .then(response => response.json())
                .then(data => {
                    const table = document.querySelector('.tabLinks');
                    data.forEach(lab => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${lab.name}</td>
                            <td><button onclick="launchLab('${lab.path}')">Launch</button></td>
                        `;
                        table.appendChild(row);
                    });
                });
    
            function launchLab(path) {
                fetch(`/launch?path=${encodeURIComponent(path)}`, { method: 'POST' })
                    .then(response => response.json())
                    .then(data => alert(data.message))
                    .catch(err => alert('Error launching lab: ' + err));
            }
        </script>
	</body>
</html>



